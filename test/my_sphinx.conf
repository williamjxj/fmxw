# http://www.ibm.com/developerworks/cn/opensource/os-php-sphinxsearch/index.html
# sql_sock	= /var/run/mysqld/mysqld.sock
source mysql
{
	type	= mysql
	
	sql_host	= localhost
	sql_user	= fmxw
	sql_pass	= fmxw123456
	sql_db		= fmxw
	sql_port	= 3563
	sql_sock	= /var/lib/mysql/mysql.sock
	
	# 发送SQL语句前发送
	sql_query_pre            = SET NAMES utf8    #设置字符编码
	#A value of 0 or OFF prevents caching or retrieval of cached results.
	sql_query_pre	 = SET SESSION query_cache_type=OFF
    sql_query_pre = REPLACE INTO sph_counter SELECT 1, MAX(cid) FROM contents

	sql_query = SELECT cid, title, content, category, item, created FROM contents \
        WHERE cid<=( SELECT max_id FROM sph_counter WHERE counter_id=1 )
		
	#sql_group_column	= category
	#sql_group_column	= item
	# WARNING: attribute 'cid' not found - IGNORING
	# sql_attr_uint 		= cid
	sql_attr_timestamp  = created     # 时间戳
	
	sql_query_info	= SELECT * FROM contents WHERE cid=$id
}


index mysql
{
	source = mysql

	# index files path and file name, without extension
	# mandatory, path must be writable, extensions will be auto-appended
	path = /var/data/coreseek/main

	ngram_len  = 0
	charset_type	 = zh_cn.utf-8
	charset_dictpath	= /usr/share/mmseg/etc/

	# 'utf-8' default value is
	# charset_table	 = 0..9, A..Z->a..z, _, a..z, U+410..U+42F->U+430..U+44F, U+430..U+44F
	
	# html_strip = 0
	docinfo		= extern
	morphology	= none
	
	# minimum indexed word length
	# default is 1 (index everything)
	min_word_len	= 3

	# ignored characters list
	# optional, default value is empty
	#
	# ignore_chars	 = U+00AD
	
	
	# minimum word prefix length to index
	# optional, default is 0 (do not index prefixes)
	#
	# min_prefix_len	= 0
	
	
	# minimum word infix length to index
	# optional, default is 0 (do not index infixes)
	#
	# min_infix_len	 = 0
	
	
	# list of fields to limit prefix/infix indexing to
	# optional, default value is empty (index all fields in prefix/infix mode)
	#
	# prefix_fields	 = filename
	# infix_fields	 = url, domain
	
	# position increment on stopword
	# optional, allowed values are 0 and 1, default is 1
	#
	# stopword_step	 = 1
	
	stopwords  = /usr/local/mmseg/stopwords.txt
}

# inherited index example
#
# all the parameters are copied from the parent index,
# and may then be overridden in this index definition

indexer
{
    mem_limit            = 128M
}

#服务器进程
searchd
{
	port				= 9312
	log					= /var/log/searchd/searchd.log
	query_log			= /var/log/searchd/query.log
	pid_file			= /var/log/searchd/searchd.pid
}
